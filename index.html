<!DOCTYPE html>
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Guia Interativo CS2</title>
<style>
body {font-family: Arial; background:#1e1e1e; color:#fff; text-align:center; margin:0;}
header{background:#2c2c2c; padding:20px; font-size:24px;}
.selector-container{display:flex; justify-content:center; gap:10px; margin:15px 0; flex-wrap:wrap;}
.selector-button{background:#444; border:none; color:#fff; padding:10px 20px; cursor:pointer; border-radius:5px;}
.selector-button.active{background:#f39c12; color:#000;}
.map-container{position:relative; display:inline-block; max-width:90%; margin:20px auto;}
.map-img{width:100%; border:2px solid #f39c12;}
.hotspot{position:absolute; width:25px; height:25px; border-radius:50%; cursor:pointer; border:2px solid #fff;}
.modal{display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); justify-content:center; align-items:center;}
.modal-content{background:#222; padding:20px; border-radius:8px; max-width:600px; width:90%;}
.modal-content img{max-width:100%; border:2px solid #f39c12;}
.close-btn{margin-top:10px; padding:5px 15px; background:#f39c12; color:#000; border:none; cursor:pointer;}
</style>
</head>
<body>

<header>Guia Interativo CS2</header>

<div class="selector-container" id="map-selector"></div>
<div class="selector-container">
  <button class="selector-button active" onclick="selectSide('tr')">TR</button>
  <button class="selector-button" onclick="selectSide('ct')">CT</button>
</div>

<div class="map-container">
  <img class="map-img" id="map-img">
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <h3 id="modal-title"></h3>
    <img id="modal-img">
    <br>
    <button class="close-btn" onclick="closeModal()">Fechar</button>
  </div>
</div>

<script>
let mapsData = {};
let currentMap = "";
let currentSide = "tr";

fetch('util_data.json')
.then(res=>res.json())
.then(data=>{
  mapsData=data;
  const selector=document.getElementById("map-selector");
  Object.keys(data).forEach((map,i)=>{
    const btn=document.createElement("button");
    btn.innerText=data[map].name;
    btn.className="selector-button"+(i===0?" active":"");
    btn.onclick=()=>selectMap(map,btn);
    selector.appendChild(btn);
    if(i===0) currentMap=map;
  });
  renderMap();
});

function selectMap(map,btn){
  currentMap=map;
  document.querySelectorAll('#map-selector .selector-button').forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  renderMap();
}

function selectSide(side){
  currentSide=side;
  document.querySelectorAll('.selector-container .selector-button').forEach(b=>{
    if(b.innerText==="TR"||b.innerText==="CT") b.classList.remove("active");
  });
  event.target.classList.add("active");
  renderMap();
}

function renderMap(){
  const mapInfo=mapsData[currentMap];
  document.getElementById("map-img").src=mapInfo.image;
  document.querySelectorAll('.hotspot').forEach(h=>h.remove());

  mapInfo[currentSide].forEach(h=>{
    const div=document.createElement("div");
    div.className="hotspot";
    div.style.left=(h.position.x/mapInfo.mapsize.width*100)+"%";
    div.style.top=(h.position.y/mapInfo.mapsize.height*100)+"%";
    div.style.background="rgba(255,165,0,0.7)";
    div.onclick=()=>showModal(h.name,h.img);
    document.querySelector(".map-container").appendChild(div);
  });
}

function showModal(title,img){
  document.getElementById("modal-title").innerText=title;
  document.getElementById("modal-img").src=img;
  document.getElementById("modal").style.display="flex";
}

function closeModal(){
  document.getElementById("modal").style.display="none";
}
</script>

</body>
</html>
