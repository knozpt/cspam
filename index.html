<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Guia Interativo CS:GO</title>
<style>
body {font-family: Arial; background:#1e1e1e; color:#fff; text-align:center; margin:0; padding:0;}
header{background:#2c2c2c; padding:20px; font-size:24px;}
.selector-container{display:flex; justify-content:center; gap:10px; margin:15px 0; flex-wrap:wrap;}
.selector-button{background:#444; border:none; color:#fff; padding:10px 20px; cursor:pointer; border-radius:5px; transition:0.2s;}
.selector-button.active{background:#f39c12; color:#000;}
.map-container{position:relative; display:inline-block; max-width:90%; margin:20px auto;}
.map-img{width:100%; border:2px solid #f39c12;}
.hotspot{position:absolute; width:30px; height:30px; border-radius:50%; cursor:pointer; border:2px solid #fff; transition:0.2s;}
.hotspot:hover{transform:scale(1.3);}
.hotspot::after{content: attr(data-tooltip); position:absolute; bottom:120%; left:50%; transform:translateX(-50%); background:#222; color:#fff; padding:5px 10px; border-radius:5px; font-size:12px; white-space:nowrap; opacity:0; pointer-events:none; transition:0.2s; z-index:100;}
.hotspot:hover::after{opacity:1;}
.modal{display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:1000;}
.modal-content{background:#222; padding:20px; border-radius:8px; max-width:600px; width:90%; text-align:center;}
.modal-content img{max-width:100%; border:2px solid #f39c12; border-radius:5px;}
.close-btn{margin-top:10px; padding:5px 15px; background:#f39c12; color:#000; border:none; cursor:pointer; border-radius:5px;}
</style>
</head>
<body>

<header>Guia Interativo CS:GO</header>

<!-- Seletor de mapa -->
<div class="selector-container" id="map-selector">
  <button class="selector-button active" onclick="selectMap('dust2')">Dust2</button>
  <button class="selector-button" onclick="selectMap('mirage')">Mirage</button>
  <button class="selector-button" onclick="selectMap('inferno')">Inferno</button>
  <button class="selector-button" onclick="selectMap('nuke')">Nuke</button>
  <button class="selector-button" onclick="selectMap('overpass')">Overpass</button>
  <button class="selector-button" onclick="selectMap('ancient')">Ancient</button>
  <button class="selector-button" onclick="selectMap('anubis')">Anubis</button>
</div>

<!-- Seletor de lado -->
<div class="selector-container" id="side-selector">
  <button class="selector-button active" onclick="selectSide('tr')">TR</button>
  <button class="selector-button" onclick="selectSide('ct')">CT</button>
</div>

<!-- Container do mapa -->
<div class="map-container">
  <img class="map-img" id="map-img" src="" alt="Mapa CS:GO">
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3 id="modal-title">Título</h3>
    <img id="modal-img" src="" alt="Utilitário">
    <br>
    <button class="close-btn" onclick="closeModal()">Fechar</button>
  </div>
</div>

<script>
// cores por tipo
const utilityColors = {smoke:'rgba(200,200,200,0.7)', flash:'rgba(255,255,255,0.7)', molotov:'rgba(255,0,0,0.7)'};

let mapsData = {};
let currentMap = 'dust2';
let currentSide = 'tr';
const mapContainer = document.querySelector('.map-container');

// carrega JSON externo
fetch('util_data.json')
.then(res=>res.json())
.then(data=>{mapsData=data; renderMap();});

// renderiza mapa e hotspots
function renderMap(){
  const mapImg = document.getElementById('map-img');
  const mapInfo = mapsData[currentMap];
  mapImg.src = mapInfo.image || ''; // se não tiver imagem, vazio

  // remove hotspots
  document.querySelectorAll('.hotspot').forEach(h=>h.remove());

  const hotspots = mapInfo[currentSide] || [];
  hotspots.forEach(h=>{
    const div=document.createElement('div');
    div.className='hotspot';
    // calcula posição relativa ao tamanho do mapa
    div.style.left=(h.position.x/mapInfo.mapsize.width*100)+'%';
    div.style.top=(h.position.y/mapInfo.mapsize.height*100)+'%';
    div.style.backgroundColor=utilityColors[h.type] || 'rgba(243,156,18,0.7)';
    div.setAttribute('data-tooltip', `${h.type.toUpperCase()}: ${h.name}`);
    div.onclick=()=>showModal(h.name,h.img);
    mapContainer.appendChild(div);
  });
}

// seleciona mapa
function selectMap(map){
  currentMap=map;
  document.querySelectorAll('#map-selector .selector-button').forEach(btn=>btn.classList.remove('active'));
  event.currentTarget.classList.add('active');
  renderMap();
}

// seleciona lado
function selectSide(side){
  currentSide=side;
  document.querySelectorAll('#side-selector .selector-button').forEach(btn=>btn.classList.remove('active'));
  event.currentTarget.classList.add('active');
  renderMap();
}

// modal
function showModal(title,imgSrc){
  document.getElementById('modal-title').innerText=title;
  document.getElementById('modal-img').src=imgSrc;
  document.getElementById('modal').style.display='flex';
}
function closeModal(){document.getElementById('modal').style.display='none';}
</script>

</body>
</html>
